<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Projects — Deekshitha Devarasetty</title>
    <meta name="description" content="Projects by Deekshitha Devarasetty — Software Engineering & ML" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
      :root {
        --bg: #0b1220; --card: #111a2b; --text: #e6ecff; --muted: #98a2b3;
        --accent: #5b8cff; --chip: #1c2842; --border: #22314f;
        /* new: consistent image + details sizes */
        --thumb-h: 200px;
      }
      :root[data-theme="light"] {
        --bg: #f7f9ff; --card: #ffffff; --text: #0f1730; --muted: #475467;
        --accent: #3b6cff; --chip: #eef2ff; --border: #d6dcf0;
      }
      @media (min-width: 820px) {
        :root { --thumb-h: 220px; }
      }
      @media (min-width: 1080px) {
        :root { --thumb-h: 240px; }
      }

      * { box-sizing: border-box; }
      body { margin: 0; padding: 40px 20px; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; color: var(--text); background: var(--bg); }
      .container { max-width: 1100px; margin: 0 auto; }

      /* Nav */
      .topnav { display:flex; align-items:center; justify-content:space-between; gap:16px; margin-bottom:18px; }
      .brand { font-weight:700; letter-spacing:.2px; }
      .navlinks { display:flex; gap:10px; flex-wrap:wrap; }
      .navbtn { display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:10px; border:1px solid var(--border); text-decoration:none; color:var(--text) }
      .navbtn:hover { border-color: var(--accent); }
      .toggle { cursor:pointer; border:1px solid var(--border); padding:8px 12px; border-radius:999px; background: var(--chip); color: var(--text); }

      /* Hero */
      .hero { background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,0)); padding: 24px; border: 1px solid var(--border); border-radius: 18px; margin-bottom: 20px; }
      h1 { margin:0 0 6px; font-size: 30px; }
      .muted { color: var(--muted); }

      .toolbar { display:flex; flex-wrap:wrap; gap:10px; margin-top:14px; }
      .chip { font-size: 13px; background: var(--chip); color: var(--text); padding: 6px 10px; border-radius: 999px; border: 1px solid var(--border); cursor:pointer; }
      .chip.active { outline: 2px solid var(--accent); }
      .search { flex:1; min-width:220px; padding:10px 12px; border-radius:12px; border:1px solid var(--border); background: var(--card); color: var(--text); }

      /* Grid & cards */
      .grid { display:grid; grid-template-columns: 1fr; gap:16px; }
      @media (min-width: 820px) { .grid { grid-template-columns: repeat(3, 1fr); } }

      .card { background: var(--card); border:1px solid var(--border); border-radius:18px; padding:0; display:flex; flex-direction:column; opacity:.001; transform:translateY(8px); overflow:hidden; }
      .card-content { padding:16px; display:flex; flex-direction:column; gap:8px; }
      .card h3 { margin:0; font-size:18px; }
      .tags { display:flex; gap:8px; flex-wrap:wrap; }
      .tag { font-size:12px; background: var(--chip); border:1px solid var(--border); border-radius:999px; padding:4px 8px; }

      /* Top image: show entire image (no crop) inside a consistent box height */
      .thumb-top {
        width: 100%;
        height: var(--thumb-h);     /* fixed, responsive height */
        object-fit: contain;        /* <-- show full image */
        object-position: center;
        display: block;
        background: var(--chip);    /* letterbox color behind transparent areas */
        border-bottom: 1px solid var(--border);
        padding: 6px;               /* small gutter so edges aren’t flush */
      }

      /* Buttons */
      .links { display:flex; gap:10px; margin-top:auto; }
      .btn { display:inline-flex; align-items:center; gap:6px; padding:8px 10px; border:1px solid var(--border); border-radius:10px; text-decoration:none; color:var(--text); background: var(--chip); }
      .btn:hover { border-color: var(--accent); }
      .btn:focus-visible { outline: 2px solid var(--accent); outline-offset: 2px; }

      footer { color: var(--muted); margin-top: 28px; text-align: center; }
      .empty { color: var(--muted); text-align:center; padding:20px; display:none; }
    </style>
  </head>
  <body>
    <div class="container">
      <nav class="topnav" aria-label="Primary">
        <div class="brand">DD</div>
        <div class="navlinks">
          <a class="navbtn" href="/">Home</a>
          <a class="navbtn" href="projects.html" aria-current="page">Projects</a>
          <button id="themeToggle" class="toggle" type="button" aria-label="Toggle theme">Toggle theme</button>
        </div>
      </nav>

      <section class="hero card">
        <div class="card-content">
          <h1>Projects</h1>
          <p class="muted">Filter by tag or search title/description. Click through for code, demos, or write-ups.</p>
          <div class="toolbar">
            <input id="search" class="search" type="search" placeholder="Search projects..." />
            <button class="chip active" data-tag="all">All</button>
            <button class="chip" data-tag="ml">ML</button>
            <button class="chip" data-tag="fullstack">Full-stack</button>
            <button class="chip" data-tag="android">Android</button>
            <button class="chip" data-tag="systems">Systems</button>
          </div>
        </div>
      </section>

      <section id="grid" class="grid">
        <!-- GPT-2 -->
        <article
          class="card"
          data-tags="ml python"
          data-search="gpt2 llm pytorch cuda fineweb hellaswag"
          data-thumb="assets/gpt2.png"
        >
          <img class="thumb-top" src="assets/gpt2.png" alt="Thumbnail image for GPT-2 project" loading="lazy" />
          <div class="card-content">
            <h3>GPT-2 LLM (124M) — from scratch</h3>
            <p class="muted">PyTorch • CUDA • Evaluation on HellaSwag with improved accuracy vs. baseline.</p>
            <div class="tags"><span class="tag">ML</span><span class="tag">Python</span></div>
            <div class="links">
              <a class="btn" href="https://github.com/USERNAME/gpt2-from-scratch" target="_blank" rel="noreferrer">Code</a>
            </div>
          </div>
        </article>

        <!-- Foodify -->
        <article
          class="card"
          data-tags="fullstack react node mongo"
          data-search="mern foodify auth rest responsive"
          data-thumb="assets/foodify.png"
        >
          <img class="thumb-top" src="assets/foodify.png" alt="Screenshot of Foodify app" loading="lazy" />
          <div class="card-content">
            <h3>Foodify — MERN social food tracker</h3>
            <p class="muted">Auth, REST APIs, responsive UI, and social feed.</p>
            <div class="tags"><span class="tag">Full-stack</span><span class="tag">React</span></div>
          </div>
        </article>

        <!-- Course-it -->
        <article
          class="card"
          data-tags="android kotlin java"
          data-search="course it android scheduler planner gradle"
          data-thumb="assets/course.png"
        >
          <img class="thumb-top" src="assets/course.png" alt="Screenshot of Course-it Android planner" loading="lazy" />
          <div class="card-content">
            <h3>Course-it — Android academic planner</h3>
            <p class="muted">Flexible schedules with Kotlin/Java; Gradle + Git.</p>
            <div class="tags"><span class="tag">Android</span><span class="tag">Kotlin</span></div>
            <div class="links">
              <a class="btn" href="https://kanvithi23.wixsite.com/2340-course-schedule" target="_blank" rel="noreferrer">Website</a>
            </div>
          </div>
        </article>
      </section>

      <p id="empty" class="empty">No projects match that filter/search.</p>

      <footer>
        <p>© <span id="y"></span> Deekshitha Devarasetty · Projects</p>
      </footer>
    </div>

    <script>
      (function () {
        const root = document.documentElement;

        /* ---------- Theme ---------- */
        function setTheme(mode) {
          if (mode === 'light') root.setAttribute('data-theme', 'light');
          else root.removeAttribute('data-theme');
          localStorage.setItem('theme', mode);
        }
        function initTheme() {
          try {
            const saved = localStorage.getItem('theme');
            const prefersLight = window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches;
            const initial = (saved === 'light') || (!saved && prefersLight) ? 'light' : '';
            if (initial === 'light') root.setAttribute('data-theme', 'light');
          } catch (_) {}
        }
        function ready(fn){ if (document.readyState !== 'loading') fn(); else document.addEventListener('DOMContentLoaded', fn); }

        initTheme();

        ready(function () {
          /* ---------- Nav & year ---------- */
          const toggle = document.getElementById('themeToggle');
          if (toggle) toggle.addEventListener('click', () => {
            const isLight = root.getAttribute('data-theme') === 'light';
            setTheme(isLight ? '' : 'light');
          });
          const year = document.getElementById('y');
          if (year) year.textContent = new Date().getFullYear();

          /* ---------- Reveal animation ---------- */
          let obs;
          try {
            obs = new IntersectionObserver((entries) => {
              entries.forEach(e => {
                if (e.isIntersecting) {
                  e.target.style.transition='transform .5s ease, opacity .5s ease';
                  e.target.style.transform='translateY(0)';
                  e.target.style.opacity='1';
                }
              });
            }, { threshold: .1 });
            document.querySelectorAll('#grid .card').forEach(c => obs.observe(c));
          } catch (_) {}

          /* ---------- Search & filter ---------- */
          const chips  = Array.from(document.querySelectorAll('.chip'));
          const search = document.getElementById('search');
          const empty  = document.getElementById('empty');
          let activeTag = 'all';

          const getCards = () => Array.from(document.querySelectorAll('#grid .card'));

          function applyFilters() {
            const q = (search?.value || '').trim().toLowerCase();
            const cards = getCards();
            let visible = 0;

            cards.forEach(card => {
              const tagsStr = (card.dataset.tags || '').trim();
              const tagsArr = tagsStr ? tagsStr.split(/\s+/) : [];
              const matchTag = activeTag === 'all' || tagsArr.includes(activeTag);

              const titleEl = card.querySelector('h3');
              const hay = (
                (card.dataset.search || '') + ' ' +
                (titleEl ? titleEl.textContent.toLowerCase() : '') + ' ' +
                tagsArr.join(' ')
              ).trim();

              const matchSearch = !q || hay.includes(q);
              const show = matchTag && matchSearch;
              card.style.display = show ? '' : 'none';
              if (show) visible++;
            });

            if (empty) empty.style.display = visible ? 'none' : 'block';
          }

          chips.forEach(chip => chip.addEventListener('click', () => {
            chips.forEach(c => c.classList.remove('active'));
            chip.classList.add('active');
            activeTag = chip.dataset.tag;
            applyFilters();
          }));

          search?.addEventListener('input', applyFilters);

          /* ---------- Equalize details heights ---------- */
          function equalizeDetails() {
            const contents = Array.from(document.querySelectorAll('#grid .card .card-content'));
            contents.forEach(el => (el.style.minHeight = '')); // reset
            // compute tallest content block
            let max = 0;
            contents.forEach(el => { max = Math.max(max, el.offsetHeight); });
            contents.forEach(el => (el.style.minHeight = max + 'px'));
          }
          const debounce = (fn, d=150) => {
            let t; return (...args) => { clearTimeout(t); t = setTimeout(() => fn.apply(null, args), d); };
          };

          /* ---------- Auto-append GitHub repos (with top images) ---------- */
          async function loadRepos() {
            const username = 'USERNAME'; // <-- replace with your GitHub username
            const fallback = 'assets/default-thumb.svg'; // <-- add this file to your repo
            try {
              const res = await fetch(`https://api.github.com/users/${username}/repos?sort=updated`);
              if (!res.ok) { applyFilters(); equalizeDetails(); return; }
              const repos = await res.json();
              const grid = document.getElementById('grid');
              repos.slice(0, 9).forEach(r => {
                if (r.fork) return;

                // Use GitHub OpenGraph image; fallback if it fails
                const og = r.full_name
                  ? `https://opengraph.githubassets.com/1/${r.full_name}`
                  : fallback;

                const card = document.createElement('article');
                card.className = 'card';
                card.dataset.tags = 'fullstack';
                card.dataset.search = (r.name + ' ' + (r.description || '')).toLowerCase();

                card.innerHTML = `
                  <img class="thumb-top" src="${og}" alt="Open Graph thumbnail for ${r.name}" loading="lazy" onerror="this.src='${fallback}'" />
                  <div class="card-content">
                    <h3>${r.name.replace(/[-_]/g,' ')}</h3>
                    <p class="muted">${r.description ? r.description : 'No description provided.'}</p>
                    <div class="tags"><span class="tag">GitHub</span></div>
                    <div class="links">
                      <a class="btn" href="${r.html_url}" target="_blank" rel="noreferrer">Code</a>
                      ${r.homepage ? `<a class="btn" href="${r.homepage}" target="_blank" rel="noreferrer">Demo</a>` : ''}
                    </div>
                  </div>
                `;

                grid.appendChild(card);
                try { obs && obs.observe(card); } catch (_) {
                  card.style.opacity='1'; card.style.transform='translateY(0)';
                }
              });

              applyFilters();
              equalizeDetails();
            } catch (_) {
              applyFilters();
              equalizeDetails();
            }
          }

          /* initial layout */
          applyFilters();
          loadRepos();
          // equalize details for the static cards too
          equalizeDetails();

          // re-equalize on resize (texts reflow) and on search/filter changes
          window.addEventListener('resize', debounce(equalizeDetails, 200));
          document.getElementById('search')?.addEventListener('input', debounce(equalizeDetails, 100));
          document.querySelectorAll('.chip').forEach(ch => ch.addEventListener('click', () => {
            setTimeout(equalizeDetails, 0);
          }));
        });
      })();
    </script>
  </body>
</html>
